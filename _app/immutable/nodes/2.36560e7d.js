import{J as H,S as Q,i as X,s as Z,a as I,k as P,q as C,c as D,l as S,m as T,r as U,h as b,n as v,b as E,G as k,K as R,L as O,H as M,M as ne,t as x,u as $,w as se,y as oe,N as ae,z as ie,O as le,A as re,g as ce,d as ue,B as pe,I as V}from"../chunks/index.393b6558.js";import{o as fe,u as he,P as de,s as A,l as B,N as J,a as N,b as _e,g as F,i as q,t as K,S as me,m as ge,c as we,d as be,e as ye,r as z}from"../chunks/note.0b3b2fb6.js";function ke({fetch:n,params:e}){return{fetch:n}}const Oe=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"}));function ve(){const n=prompt("enter openai key");n&&fe.set(n)}const Ee={tags:["openai","ai","gpt"],rep:"⚙️ add openai key",executor:ve};function ee(n,e){return typeof n=="string"?n.startsWith(e):typeof n=="function"?n(e):n.reduce((t,s)=>t||ee(s,e),!1)}let Pe=[{tags:["lightmode","darkmode"],rep:"⚙️ switch lightmode",executor:()=>{B.set(!H(B))}},{tags:["account","login","signup","sign in","log out","sign out","user account"],rep:"⚙️ account settings",executor:()=>{window.location.pathname="login"}},Ee],te;function Se(){let n=he().map(e=>{const t=decodeURI(e[0]).replaceAll("_"," ").trimStart(),s=(e[1].pub?"📃 ":"🔒 ")+t.replace(":"," by ");return{tags:t,rep:s,executor:()=>{const i=new de(e[1].pub,e[1].author,e[1].location).tostring();window.location.search=i.replace("#",""),A.update(o=>(o[s]=Date.now(),o)),console.log(H(A))}}}).sort((e,t)=>(H(A)[t.rep]??0)-(H(A)[e.rep]??0));te=Pe.concat(...n)}function Te(n,e=10){return te.filter(s=>ee(s.tags,n)).slice(0,e)}function Y(n,e,t){const s=n.slice();return s[11]=e[t],s[13]=t,s}function Ie(n){let e,t,s,c;return{c(){e=P("button"),t=C("⚙︎"),this.h()},l(i){e=S(i,"BUTTON",{id:!0});var o=T(e);t=U(o,"⚙︎"),o.forEach(b),this.h()},h(){v(e,"id","search_btn")},m(i,o){E(i,e,o),k(e,t),s||(c=O(e,"click",n[7]),s=!0)},p:M,d(i){i&&b(e),s=!1,c()}}}function De(n){let e,t,s,c;return{c(){e=P("span"),t=C(">> Cmd + P"),this.h()},l(i){e=S(i,"SPAN",{id:!0});var o=T(e);t=U(o,">> Cmd + P"),o.forEach(b),this.h()},h(){v(e,"id","search_btn")},m(i,o){E(i,e,o),k(e,t),s||(c=O(e,"click",n[6]),s=!0)},p:M,d(i){i&&b(e),s=!1,c()}}}function G(n){let e,t=(typeof n[11].rep=="string"?n[11].rep:n[11].rep(n[2]))+"",s,c,i,o,_,d;function y(){return n[10](n[11])}return{c(){e=P("p"),s=C(t),i=I(),o=P("br"),this.h()},l(p){e=S(p,"P",{class:!0});var a=T(e);s=U(a,t),a.forEach(b),i=D(p),o=S(p,"BR",{}),this.h()},h(){v(e,"class",c=n[13]==n[4]?"highlighted":"")},m(p,a){E(p,e,a),k(e,s),E(p,i,a),E(p,o,a),_||(d=O(e,"click",y),_=!0)},p(p,a){n=p,a&12&&t!==(t=(typeof n[11].rep=="string"?n[11].rep:n[11].rep(n[2]))+"")&&$(s,t),a&16&&c!==(c=n[13]==n[4]?"highlighted":"")&&v(e,"class",c)},d(p){p&&b(e),p&&b(i),p&&b(o),_=!1,d()}}}function Le(n){let e,t,s,c,i,o,_,d,y,p,a;function g(l,w){return l[5]?De:Ie}let f=g(n),r=f(n),u=n[3],h=[];for(let l=0;l<u.length;l+=1)h[l]=G(Y(n,u,l));return{c(){r.c(),e=I(),t=P("div"),s=P("p"),c=C(W),i=I(),o=P("input"),_=I(),d=P("div");for(let l=0;l<h.length;l+=1)h[l].c();this.h()},l(l){r.l(l),e=D(l),t=S(l,"DIV",{class:!0});var w=T(t);s=S(w,"P",{id:!0});var m=T(s);c=U(m,W),m.forEach(b),i=D(w),o=S(w,"INPUT",{placeholder:!0,type:!0}),_=D(w),d=S(w,"DIV",{class:!0});var L=T(d);for(let j=0;j<h.length;j+=1)h[j].l(L);L.forEach(b),w.forEach(b),this.h()},h(){v(s,"id","searchsuggestion"),v(o,"placeholder","search..."),v(o,"type","text"),v(d,"class","results"),v(t,"class","searchbar"),t.hidden=y=!n[0]},m(l,w){r.m(l,w),E(l,e,w),E(l,t,w),k(t,s),k(s,c),k(t,i),k(t,o),n[8](o),R(o,n[2]),k(t,_),k(t,d);for(let m=0;m<h.length;m+=1)h[m].m(d,null);p||(a=O(o,"input",n[9]),p=!0)},p(l,[w]){if(f===(f=g(l))&&r?r.p(l,w):(r.d(1),r=f(l),r&&(r.c(),r.m(e.parentNode,e))),w&4&&o.value!==l[2]&&R(o,l[2]),w&28){u=l[3];let m;for(m=0;m<u.length;m+=1){const L=Y(l,u,m);h[m]?h[m].p(L,w):(h[m]=G(L),h[m].c(),h[m].m(d,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=u.length}w&1&&y!==(y=!l[0])&&(t.hidden=y)},i:M,o:M,d(l){r.d(l),l&&b(e),l&&b(t),n[8](null),ne(h,l),p=!1,a()}}}let W="";function Ne(n,e,t){let s=!1,c="",i=[],o=0;window.addEventListener("keydown",r=>{r.key=="p"?r.metaKey&&(r.preventDefault(),t(0,s=!0)):r.key=="Escape"&&t(0,s=!1)}),window.addEventListener("keyup",r=>{if(s&&!(r.key=="Meta"||r.key=="Escape"))if(r.key=="ArrowUp")t(4,o=Math.max(o-1,0));else if(r.key=="ArrowDown")t(4,o=Math.min(o+1,i.length-1));else if(r.key=="Tab"){r.preventDefault();let u=i[o].tags;typeof u=="string"&&(u=u.split(":")[0],u=u.split(".").slice(0,c.split(".").length).join("."),t(2,c=u),_.focus())}else if(r.key=="Enter")i[o].executor(c);else{if(c==""){t(3,i=[]);return}t(4,o=0),t(3,i=Te(c)),i.length==0&&t(3,i=[{tags:u=>!0,rep:u=>`⚙️ create Page: ${u}`,executor:u=>{const h=new J("#"+u);N.setitem(h.data),window.location.search=u}},{tags:u=>!0,rep:u=>`⚙️ create secret Page: ${u}`,executor:u=>{const h=new J("_"+u);N.setitem(h.data),window.location.search="_"+u}}]),i[0]}}),window.addEventListener("click",r=>{r.target.id!="search_btn"&&(t(0,s=!1),t(5,d=!1))});let _,d=!1;const y=()=>{t(5,d=!1),t(0,s=!0)},p=r=>{t(5,d=!0)};function a(r){se[r?"unshift":"push"](()=>{_=r,t(1,_)})}function g(){c=this.value,t(2,c)}const f=r=>{r.executor(c)};return n.$$.update=()=>{n.$$.dirty&3&&s&&(Se(),x().then(()=>{_.focus()}))},[s,_,c,i,o,d,y,p,a,g,f]}class Ce extends Q{constructor(e){super(),X(this,e,Ne,Le,Z,{})}}function Ue(n){let e,t,s,c,i,o=n[1]?"":"offline",_,d,y,p;return e=new Ce({}),{c(){oe(e.$$.fragment),t=I(),s=P("h2"),c=new ae(!1),i=I(),_=C(o),d=I(),y=P("div"),this.h()},l(a){ie(e.$$.fragment,a),t=D(a),s=S(a,"H2",{id:!0});var g=T(s);c=le(g,!1),i=D(g),_=U(g,o),g.forEach(b),d=D(a),y=S(a,"DIV",{id:!0});var f=T(y);f.forEach(b),this.h()},h(){c.a=i,v(s,"id","fullheader"),v(y,"id","page")},m(a,g){re(e,a,g),E(a,t,g),E(a,s,g),c.m(n[0],s),k(s,i),k(s,_),E(a,d,g),E(a,y,g),p=!0},p(a,[g]){(!p||g&1)&&c.p(a[0]),(!p||g&2)&&o!==(o=a[1]?"":"offline")&&$(_,o)},i(a){p||(ce(e.$$.fragment,a),p=!0)},o(a){ue(e.$$.fragment,a),p=!1},d(a){pe(e,a),a&&b(t),a&&b(s),a&&b(d),a&&b(y)}}}function Ae(n,e,t){let s,c;V(n,be,f=>t(8,s=f)),V(n,ye,f=>t(1,c=f));let{data:i}=e;document.title=window.location.hostname;var o,_="<br>";o=`<a href=/ onclick="window.location.href = '${window.origin}'; location.reload();" id=homebtn>sciepedia</a>`,_=o,x().then(g);let d;const y=`Click me and write something: xzxysl ... &^

You can create a new link with # followed by text, for example: #link #recursion #whatever

Click on a link to open a page. If the page already exists, it will be displayed to you.

Almost forgot! Create an account: {}/login, and then you can create public pages.

If you want to learn more, check out: #sciepedia:kormann
`;let p,a;s[0];async function g(){_e(),window.fetch=i.fetch,B.subscribe(l=>{l?document.body.classList.add("light"):document.body.classList.remove("light")}),d=document.createElement("div"),d.innerHTML="<p>this is a pred</p><p>this is a pred</p><p>this is a pred</p>",d.id="pred",o=`<a href=/ onclick="setTimeout(()=>{window.location.href='${window.origin}'})" id=homebtn>sciepedia</a>`,t(0,_=o);let f=window.location.search;a=[F(z.path)],f&&f.length>1&&(f=decodeURI(f.slice(1)),q(f)||(f="#"+f),console.log("searching:",f),q(f)&&(a.push(a[0]),z.path=f)),p=document.querySelector("#page"),window.addEventListener("scroll",l=>{t(0,_=o);let w={element:{offsetTop:0},fullpath:"<span id=homebtn>sciepedia</span>"};K.forEach(m=>{window.scrollY+m.element.offsetHeight>m.element.offsetTop&&w.element.offsetTop<m.element.offsetTop})});const r=F("_tutorial:"+s);N.has(r)||N.setitem({Path:r,Content:y.replace("{}",window.location.origin),id:crypto.randomUUID()});let u=F(z.path);if(!N.has(u)){const l={Path:u,Content:`welcome to sciepedia
try out the tutorial: _tutorial`,id:crypto.randomUUID()};localStorage[JSON.stringify(l.Path)]=JSON.stringify(l)}let h=new J("_home",u);u.location.includes("js")&&(h=new me("_home",u)),K.push({element:h.head.title_element,fullpath:u}),p.appendChild(h.element),document.body.addEventListener("click",l=>{l.target==document.body&&ge(null)}),window.addEventListener("onunload",l=>{localStorage.unloading=!0,h.body.free(),localStorage.unloaded=!0}),we().then(()=>{h.body.spellcheck()})}return n.$$set=f=>{"data"in f&&t(2,i=f.data)},[_,c,i]}class je extends Q{constructor(e){super(),X(this,e,Ae,Ue,Z,{data:2})}}export{je as component,Oe as universal};
