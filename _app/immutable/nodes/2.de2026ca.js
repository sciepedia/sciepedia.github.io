import{J as U,S as F,i as Q,s as X,a as S,k as v,q as A,c as I,l as E,m as L,r as H,h as g,n as y,b as k,G as T,K as R,L as O,H as M,M as ee,t as Z,u as te,w as oe,y as ne,z as se,A as le,g as ie,d as ae,B as re,I as V}from"../chunks/index.88c76112.js";import{o as ce,u as ue,P as pe,s as C,l as N,a as de,g as z,i as q,t as K,b as B,N as he,m as fe,c as _e,d as me,r as J}from"../chunks/note.b4895ffc.js";function ge({fetch:o,params:e}){return{fetch:o}}const Ne=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function be(){const o=prompt("enter openai key");o&&ce.set(o)}const we={tags:["openai","ai","gpt"],rep:"⚙️ add openai key",executor:be};function x(o,e){return typeof o=="string"?o.startsWith(e):typeof o=="function"?o(e):o.reduce((t,n)=>t||x(n,e),!1)}let ye=[{tags:["lightmode","darkmode"],rep:"⚙️ switch lightmode",executor:()=>{N.set(!U(N))}},{tags:["account","login","signup","sign in","log out","sign out","user account"],rep:"⚙️ account settings",executor:()=>{window.location.pathname="login"}},we];const ke=[{tags:o=>!o.includes(" "),rep:o=>`⚙️ create Page: ${o}`,executor:o=>{console.log("redirect to ",o),window.location.search=o}}];let $;function ve(){let o=ue().map(e=>{const t=decodeURI(e[0]).replaceAll("_"," "),n=(e[1].pub?"📃 ":"🔒 ")+t.replace(":"," by ");return{tags:t,rep:n,executor:()=>{const l=new pe(e[1].pub,e[1].author,e[1].location).tostring();window.location.search=l.replace("#",""),C.update(s=>(s[n]=Date.now(),s)),console.log(U(C))}}}).sort((e,t)=>(U(C)[t.rep]??0)-(U(C)[e.rep]??0));$=ye.concat(...o,...ke)}function Ee(o,e=10){return $.filter(n=>x(n.tags,o)).slice(0,e)}function Y(o,e,t){const n=o.slice();return n[11]=e[t],n[13]=t,n}function Pe(o){let e,t,n,r;return{c(){e=v("button"),t=A("⚙︎"),this.h()},l(l){e=E(l,"BUTTON",{id:!0});var s=L(e);t=H(s,"⚙︎"),s.forEach(g),this.h()},h(){y(e,"id","search_btn")},m(l,s){k(l,e,s),T(e,t),n||(r=O(e,"click",o[7]),n=!0)},p:M,d(l){l&&g(e),n=!1,r()}}}function Te(o){let e,t,n,r;return{c(){e=v("span"),t=A(">> Cmd + P"),this.h()},l(l){e=E(l,"SPAN",{id:!0});var s=L(e);t=H(s,">> Cmd + P"),s.forEach(g),this.h()},h(){y(e,"id","search_btn")},m(l,s){k(l,e,s),T(e,t),n||(r=O(e,"click",o[6]),n=!0)},p:M,d(l){l&&g(e),n=!1,r()}}}function G(o){let e,t=(typeof o[11].rep=="string"?o[11].rep:o[11].rep(o[2]))+"",n,r,l,s,i,u;function w(){return o[10](o[11])}return{c(){e=v("p"),n=A(t),l=S(),s=v("br"),this.h()},l(d){e=E(d,"P",{class:!0});var b=L(e);n=H(b,t),b.forEach(g),l=I(d),s=E(d,"BR",{}),this.h()},h(){y(e,"class",r=o[13]==o[4]?"highlighted":"")},m(d,b){k(d,e,b),T(e,n),k(d,l,b),k(d,s,b),i||(u=O(e,"click",w),i=!0)},p(d,b){o=d,b&12&&t!==(t=(typeof o[11].rep=="string"?o[11].rep:o[11].rep(o[2]))+"")&&te(n,t),b&16&&r!==(r=o[13]==o[4]?"highlighted":"")&&y(e,"class",r)},d(d){d&&g(e),d&&g(l),d&&g(s),i=!1,u()}}}function Le(o){let e,t,n,r,l,s,i,u,w,d,b;function h(c,_){return c[5]?Te:Pe}let P=h(o),a=P(o),f=o[3],p=[];for(let c=0;c<f.length;c+=1)p[c]=G(Y(o,f,c));return{c(){a.c(),e=S(),t=v("div"),n=v("p"),r=A(W),l=S(),s=v("input"),i=S(),u=v("div");for(let c=0;c<p.length;c+=1)p[c].c();this.h()},l(c){a.l(c),e=I(c),t=E(c,"DIV",{class:!0});var _=L(t);n=E(_,"P",{id:!0});var m=L(n);r=H(m,W),m.forEach(g),l=I(_),s=E(_,"INPUT",{placeholder:!0,type:!0}),i=I(_),u=E(_,"DIV",{class:!0});var D=L(u);for(let j=0;j<p.length;j+=1)p[j].l(D);D.forEach(g),_.forEach(g),this.h()},h(){y(n,"id","searchsuggestion"),y(s,"placeholder","search..."),y(s,"type","text"),y(u,"class","results"),y(t,"class","searchbar"),t.hidden=w=!o[0]},m(c,_){a.m(c,_),k(c,e,_),k(c,t,_),T(t,n),T(n,r),T(t,l),T(t,s),o[8](s),R(s,o[2]),T(t,i),T(t,u);for(let m=0;m<p.length;m+=1)p[m].m(u,null);d||(b=O(s,"input",o[9]),d=!0)},p(c,[_]){if(P===(P=h(c))&&a?a.p(c,_):(a.d(1),a=P(c),a&&(a.c(),a.m(e.parentNode,e))),_&4&&s.value!==c[2]&&R(s,c[2]),_&28){f=c[3];let m;for(m=0;m<f.length;m+=1){const D=Y(c,f,m);p[m]?p[m].p(D,_):(p[m]=G(D),p[m].c(),p[m].m(u,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=f.length}_&1&&w!==(w=!c[0])&&(t.hidden=w)},i:M,o:M,d(c){a.d(c),c&&g(e),c&&g(t),o[8](null),ee(p,c),d=!1,b()}}}let W="";function Se(o,e,t){let n=!1,r="",l=[],s=0;window.addEventListener("keydown",a=>{a.key=="p"?a.metaKey&&(a.preventDefault(),t(0,n=!0)):a.key=="Escape"&&t(0,n=!1)}),window.addEventListener("keyup",a=>{if(n&&!(a.key=="Meta"||a.key=="Escape"))if(a.key=="ArrowUp")t(4,s=Math.max(s-1,0));else if(a.key=="ArrowDown")t(4,s=Math.min(s+1,l.length-1));else if(a.key=="Tab"){let f=l[s].tags;console.log("tabbing"),console.log(f),typeof f=="string"&&(f=f.split(":")[0],console.log(f),f=f.split(".").slice(0,r.split(".").length).join("."),t(2,r=f),i.focus()),a.preventDefault()}else if(a.key=="Enter")l[s].executor(r);else{if(r==""){t(3,l=[]);return}t(4,s=0),t(3,l=Ee(r));let f=l[0];console.log(f.tags)}}),window.addEventListener("click",a=>{a.target.id!="search_btn"&&(t(0,n=!1),t(5,u=!1))});let i,u=!1;const w=()=>{t(5,u=!1),t(0,n=!0)},d=a=>{t(5,u=!0)};function b(a){oe[a?"unshift":"push"](()=>{i=a,t(1,i)})}function h(){r=this.value,t(2,r)}const P=a=>{a.executor(r)};return o.$$.update=()=>{o.$$.dirty&3&&n&&(ve(),Z().then(()=>{i.focus()}))},[n,i,r,l,s,u,w,d,b,h,P]}class Ie extends F{constructor(e){super(),Q(this,e,Se,Le,X,{})}}function De(o){let e,t,n,r,l,s;return e=new Ie({}),{c(){ne(e.$$.fragment),t=S(),n=v("h2"),r=S(),l=v("div"),this.h()},l(i){se(e.$$.fragment,i),t=I(i),n=E(i,"H2",{id:!0});var u=L(n);u.forEach(g),r=I(i),l=E(i,"DIV",{id:!0});var w=L(l);w.forEach(g),this.h()},h(){y(n,"id","fullheader"),y(l,"id","page")},m(i,u){le(e,i,u),k(i,t,u),k(i,n,u),n.innerHTML=o[0],k(i,r,u),k(i,l,u),s=!0},p(i,[u]){(!s||u&1)&&(n.innerHTML=i[0])},i(i){s||(ie(e.$$.fragment,i),s=!0)},o(i){ae(e.$$.fragment,i),s=!1},d(i){re(e,i),i&&g(t),i&&g(n),i&&g(r),i&&g(l)}}}function Ce(o,e,t){let n;V(o,N,h=>t(7,h)),V(o,me,h=>t(8,n=h));let{data:r}=e;document.title=window.location.hostname;var l,s="<br>";l=`<a href=/ onclick="window.location.href = '${window.origin}'; location.reload();" id=homebtn>sciepedia</a>`,s=l,Z().then(b);let i;const u=`Click me and write something: xzxysl ... &^

You can create a new link with # followed by text, for example: #link #recursion #whatever

Click on a link to open a page. If the page already exists, it will be displayed to you.

Almost forgot! Create an account: {}/login, and then you can create public pages.

If you want to learn more, check out: #sciepedia:kormann
`;let w,d;n[0];async function b(){de(),window.fetch=r.fetch,N.subscribe(p=>{p?document.body.classList.add("light"):document.body.classList.remove("light")}),i=document.createElement("div"),i.innerHTML="<p>this is a pred</p><p>this is a pred</p><p>this is a pred</p>",i.id="pred",l=`<a href=/ onclick="setTimeout(()=>{window.location.href='${window.origin}'})" id=homebtn>sciepedia</a>`,t(0,s=l);let h=window.location.search;d=[z(J.path)],h&&h.length>1&&(h=decodeURI(h.slice(1)),q(h)||(h="#"+h),console.log("searching:",h),q(h)&&(d.push(d[0]),J.path=h)),w=document.querySelector("#page"),window.addEventListener("scroll",p=>{t(0,s=l);let c={element:{offsetTop:0},fullpath:"<span id=homebtn>sciepedia</span>"};K.forEach(_=>{window.scrollY+_.element.offsetHeight>_.element.offsetTop&&c.element.offsetTop<_.element.offsetTop})});const P=z("_tutorial:"+n);B.has(P)||B.setitem({Path:P,Content:u.replace("{}",window.location.origin),id:crypto.randomUUID()});let a=z(J.path);if(!B.has(a)){const p={Path:a,Content:`welcome to sciepedia
try out the tutorial: _tutorial`,id:crypto.randomUUID()};localStorage[JSON.stringify(p.Path)]=JSON.stringify(p)}let f=new he("_home",a);K.push({element:f.head.title_element,fullpath:a}),w.appendChild(f.element),document.body.addEventListener("click",p=>{p.target==document.body&&fe(null)}),window.addEventListener("onunload",p=>{localStorage.unloading=!0,f.body.free(),localStorage.unloaded=!0}),_e().then(()=>{f.body.spellcheck()})}return o.$$set=h=>{"data"in h&&t(1,r=h.data)},[s,r]}class Ae extends F{constructor(e){super(),Q(this,e,Ce,De,X,{data:1})}}export{Ae as component,Ne as universal};
