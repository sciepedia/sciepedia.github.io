import{J as M,S as Q,i as X,s as Z,a as L,k as v,q as H,c as I,l as E,m as T,r as O,h as g,n as y,b as k,G as S,K as R,L as F,H as N,M as te,t as x,u as ne,w as oe,y as se,z as ae,A as ie,g as le,d as re,B as ce,I as V}from"../chunks/index.88c76112.js";import{o as ue,u as pe,P as he,s as U,l as A,N as J,a as C,b as de,g as z,i as q,t as K,m as fe,c as _e,d as me,r as B}from"../chunks/note.84e77282.js";function ge({fetch:n,params:e}){return{fetch:n}}const Me=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function we(){const n=prompt("enter openai key");n&&ue.set(n)}const be={tags:["openai","ai","gpt"],rep:"⚙️ add openai key",executor:we};function $(n,e){return typeof n=="string"?n.startsWith(e):typeof n=="function"?n(e):n.reduce((t,o)=>t||$(o,e),!1)}let ye=[{tags:["lightmode","darkmode"],rep:"⚙️ switch lightmode",executor:()=>{A.set(!M(A))}},{tags:["account","login","signup","sign in","log out","sign out","user account"],rep:"⚙️ account settings",executor:()=>{window.location.pathname="login"}},be],ee;function ke(){let n=pe().map(e=>{const t=decodeURI(e[0]).replaceAll("_"," ").trimStart(),o=(e[1].pub?"📃 ":"🔒 ")+t.replace(":"," by ");return{tags:t,rep:o,executor:()=>{const a=new he(e[1].pub,e[1].author,e[1].location).tostring();window.location.search=a.replace("#",""),U.update(s=>(s[o]=Date.now(),s)),console.log(M(U))}}}).sort((e,t)=>(M(U)[t.rep]??0)-(M(U)[e.rep]??0));ee=ye.concat(...n)}function ve(n,e=10){return ee.filter(o=>$(o.tags,n)).slice(0,e)}function Y(n,e,t){const o=n.slice();return o[11]=e[t],o[13]=t,o}function Ee(n){let e,t,o,r;return{c(){e=v("button"),t=H("⚙︎"),this.h()},l(a){e=E(a,"BUTTON",{id:!0});var s=T(e);t=O(s,"⚙︎"),s.forEach(g),this.h()},h(){y(e,"id","search_btn")},m(a,s){k(a,e,s),S(e,t),o||(r=F(e,"click",n[7]),o=!0)},p:N,d(a){a&&g(e),o=!1,r()}}}function Pe(n){let e,t,o,r;return{c(){e=v("span"),t=H(">> Cmd + P"),this.h()},l(a){e=E(a,"SPAN",{id:!0});var s=T(e);t=O(s,">> Cmd + P"),s.forEach(g),this.h()},h(){y(e,"id","search_btn")},m(a,s){k(a,e,s),S(e,t),o||(r=F(e,"click",n[6]),o=!0)},p:N,d(a){a&&g(e),o=!1,r()}}}function G(n){let e,t=(typeof n[11].rep=="string"?n[11].rep:n[11].rep(n[2]))+"",o,r,a,s,i,h;function b(){return n[10](n[11])}return{c(){e=v("p"),o=H(t),a=L(),s=v("br"),this.h()},l(d){e=E(d,"P",{class:!0});var w=T(e);o=O(w,t),w.forEach(g),a=I(d),s=E(d,"BR",{}),this.h()},h(){y(e,"class",r=n[13]==n[4]?"highlighted":"")},m(d,w){k(d,e,w),S(e,o),k(d,a,w),k(d,s,w),i||(h=F(e,"click",b),i=!0)},p(d,w){n=d,w&12&&t!==(t=(typeof n[11].rep=="string"?n[11].rep:n[11].rep(n[2]))+"")&&ne(o,t),w&16&&r!==(r=n[13]==n[4]?"highlighted":"")&&y(e,"class",r)},d(d){d&&g(e),d&&g(a),d&&g(s),i=!1,h()}}}function Se(n){let e,t,o,r,a,s,i,h,b,d,w;function f(c,_){return c[5]?Pe:Ee}let P=f(n),l=P(n),u=n[3],p=[];for(let c=0;c<u.length;c+=1)p[c]=G(Y(n,u,c));return{c(){l.c(),e=L(),t=v("div"),o=v("p"),r=H(W),a=L(),s=v("input"),i=L(),h=v("div");for(let c=0;c<p.length;c+=1)p[c].c();this.h()},l(c){l.l(c),e=I(c),t=E(c,"DIV",{class:!0});var _=T(t);o=E(_,"P",{id:!0});var m=T(o);r=O(m,W),m.forEach(g),a=I(_),s=E(_,"INPUT",{placeholder:!0,type:!0}),i=I(_),h=E(_,"DIV",{class:!0});var D=T(h);for(let j=0;j<p.length;j+=1)p[j].l(D);D.forEach(g),_.forEach(g),this.h()},h(){y(o,"id","searchsuggestion"),y(s,"placeholder","search..."),y(s,"type","text"),y(h,"class","results"),y(t,"class","searchbar"),t.hidden=b=!n[0]},m(c,_){l.m(c,_),k(c,e,_),k(c,t,_),S(t,o),S(o,r),S(t,a),S(t,s),n[8](s),R(s,n[2]),S(t,i),S(t,h);for(let m=0;m<p.length;m+=1)p[m].m(h,null);d||(w=F(s,"input",n[9]),d=!0)},p(c,[_]){if(P===(P=f(c))&&l?l.p(c,_):(l.d(1),l=P(c),l&&(l.c(),l.m(e.parentNode,e))),_&4&&s.value!==c[2]&&R(s,c[2]),_&28){u=c[3];let m;for(m=0;m<u.length;m+=1){const D=Y(c,u,m);p[m]?p[m].p(D,_):(p[m]=G(D),p[m].c(),p[m].m(h,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=u.length}_&1&&b!==(b=!c[0])&&(t.hidden=b)},i:N,o:N,d(c){l.d(c),c&&g(e),c&&g(t),n[8](null),te(p,c),d=!1,w()}}}let W="";function Te(n,e,t){let o=!1,r="",a=[],s=0;window.addEventListener("keydown",l=>{l.key=="p"?l.metaKey&&(l.preventDefault(),t(0,o=!0)):l.key=="Escape"&&t(0,o=!1)}),window.addEventListener("keyup",l=>{if(o&&!(l.key=="Meta"||l.key=="Escape"))if(l.key=="ArrowUp")t(4,s=Math.max(s-1,0));else if(l.key=="ArrowDown")t(4,s=Math.min(s+1,a.length-1));else if(l.key=="Tab"){l.preventDefault();let u=a[s].tags;typeof u=="string"&&(u=u.split(":")[0],u=u.split(".").slice(0,r.split(".").length).join("."),t(2,r=u),i.focus())}else if(l.key=="Enter")a[s].executor(r);else{if(r==""){t(3,a=[]);return}t(4,s=0),t(3,a=ve(r)),a.length==0&&t(3,a=[{tags:u=>!0,rep:u=>`⚙️ create Page: ${u}`,executor:u=>{const p=new J("#"+u);C.setitem(p.data),window.location.search=u}},{tags:u=>!0,rep:u=>`⚙️ create secret Page: ${u}`,executor:u=>{const p=new J("_"+u);C.setitem(p.data),window.location.search="_"+u}}]),a[0]}}),window.addEventListener("click",l=>{l.target.id!="search_btn"&&(t(0,o=!1),t(5,h=!1))});let i,h=!1;const b=()=>{t(5,h=!1),t(0,o=!0)},d=l=>{t(5,h=!0)};function w(l){oe[l?"unshift":"push"](()=>{i=l,t(1,i)})}function f(){r=this.value,t(2,r)}const P=l=>{l.executor(r)};return n.$$.update=()=>{n.$$.dirty&3&&o&&(ke(),x().then(()=>{i.focus()}))},[o,i,r,a,s,h,b,d,w,f,P]}class Le extends Q{constructor(e){super(),X(this,e,Te,Se,Z,{})}}function Ie(n){let e,t,o,r,a,s;return e=new Le({}),{c(){se(e.$$.fragment),t=L(),o=v("h2"),r=L(),a=v("div"),this.h()},l(i){ae(e.$$.fragment,i),t=I(i),o=E(i,"H2",{id:!0});var h=T(o);h.forEach(g),r=I(i),a=E(i,"DIV",{id:!0});var b=T(a);b.forEach(g),this.h()},h(){y(o,"id","fullheader"),y(a,"id","page")},m(i,h){ie(e,i,h),k(i,t,h),k(i,o,h),o.innerHTML=n[0],k(i,r,h),k(i,a,h),s=!0},p(i,[h]){(!s||h&1)&&(o.innerHTML=i[0])},i(i){s||(le(e.$$.fragment,i),s=!0)},o(i){re(e.$$.fragment,i),s=!1},d(i){ce(e,i),i&&g(t),i&&g(o),i&&g(r),i&&g(a)}}}function De(n,e,t){let o;V(n,A,f=>t(7,f)),V(n,me,f=>t(8,o=f));let{data:r}=e;document.title=window.location.hostname;var a,s="<br>";a=`<a href=/ onclick="window.location.href = '${window.origin}'; location.reload();" id=homebtn>sciepedia</a>`,s=a,x().then(w);let i;const h=`Click me and write something: xzxysl ... &^

You can create a new link with # followed by text, for example: #link #recursion #whatever

Click on a link to open a page. If the page already exists, it will be displayed to you.

Almost forgot! Create an account: {}/login, and then you can create public pages.

If you want to learn more, check out: #sciepedia:kormann
`;let b,d;o[0];async function w(){de(),window.fetch=r.fetch,A.subscribe(p=>{p?document.body.classList.add("light"):document.body.classList.remove("light")}),i=document.createElement("div"),i.innerHTML="<p>this is a pred</p><p>this is a pred</p><p>this is a pred</p>",i.id="pred",a=`<a href=/ onclick="setTimeout(()=>{window.location.href='${window.origin}'})" id=homebtn>sciepedia</a>`,t(0,s=a);let f=window.location.search;d=[z(B.path)],f&&f.length>1&&(f=decodeURI(f.slice(1)),q(f)||(f="#"+f),console.log("searching:",f),q(f)&&(d.push(d[0]),B.path=f)),b=document.querySelector("#page"),window.addEventListener("scroll",p=>{t(0,s=a);let c={element:{offsetTop:0},fullpath:"<span id=homebtn>sciepedia</span>"};K.forEach(_=>{window.scrollY+_.element.offsetHeight>_.element.offsetTop&&c.element.offsetTop<_.element.offsetTop})});const P=z("_tutorial:"+o);C.has(P)||C.setitem({Path:P,Content:h.replace("{}",window.location.origin),id:crypto.randomUUID()});let l=z(B.path);if(!C.has(l)){const p={Path:l,Content:`welcome to sciepedia
try out the tutorial: _tutorial`,id:crypto.randomUUID()};localStorage[JSON.stringify(p.Path)]=JSON.stringify(p)}let u=new J("_home",l);K.push({element:u.head.title_element,fullpath:l}),b.appendChild(u.element),document.body.addEventListener("click",p=>{p.target==document.body&&fe(null)}),window.addEventListener("onunload",p=>{localStorage.unloading=!0,u.body.free(),localStorage.unloaded=!0}),_e().then(()=>{u.body.spellcheck()})}return n.$$set=f=>{"data"in f&&t(1,r=f.data)},[s,r]}class Ne extends Q{constructor(e){super(),X(this,e,De,Ie,Z,{data:1})}}export{Ne as component,Me as universal};
