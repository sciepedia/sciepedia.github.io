import{J as H,S as Q,i as X,s as Z,a as I,k as P,q as C,c as D,l as S,m as T,r as U,h as y,n as v,b as E,G as k,K as R,L as O,H as M,M as ne,t as x,u as $,w as oe,y as se,N as ae,z as ie,O as le,A as re,g as ce,d as ue,B as pe,I as V}from"../chunks/index.393b6558.js";import{o as fe,u as he,P as de,s as A,l as B,N as J,a as N,b as _e,g as F,i as q,t as K,S as me,m as ge,c as we,d as ye,e as be,r as z}from"../chunks/note.ac35c6ff.js";function ke({fetch:n,params:e}){return{fetch:n}}const Oe=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"}));function ve(){const n=prompt("enter openai key");n&&fe.set(n)}const Ee={tags:["openai","ai","gpt"],rep:"âš™ï¸ add openai key",executor:ve};function ee(n,e){return typeof n=="string"?n.startsWith(e):typeof n=="function"?n(e):n.reduce((t,o)=>t||ee(o,e),!1)}let Pe=[{tags:["lightmode","darkmode"],rep:"âš™ï¸ switch lightmode",executor:()=>{B.set(!H(B))}},{tags:["account","login","signup","sign in","log out","sign out","user account"],rep:"âš™ï¸ account settings",executor:()=>{window.location.pathname="login"}},Ee],te;function Se(){let n=he().map(e=>{const t=decodeURI(e[0]).replaceAll("_"," ").trimStart(),o=(e[1].pub?"ðŸ“ƒ ":"ðŸ”’ ")+t.replace(":"," by ");return{tags:t,rep:o,executor:()=>{const i=new de(e[1].pub,e[1].author,e[1].location).tostring();window.location.search=i.replace("#",""),A.update(s=>(s[o]=Date.now(),s)),console.log(H(A))}}}).sort((e,t)=>(H(A)[t.rep]??0)-(H(A)[e.rep]??0));te=Pe.concat(...n)}function Te(n,e=10){return te.filter(o=>ee(o.tags,n)).slice(0,e)}function Y(n,e,t){const o=n.slice();return o[11]=e[t],o[13]=t,o}function Ie(n){let e,t,o,c;return{c(){e=P("button"),t=C("âš™ï¸Ž"),this.h()},l(i){e=S(i,"BUTTON",{id:!0});var s=T(e);t=U(s,"âš™ï¸Ž"),s.forEach(y),this.h()},h(){v(e,"id","search_btn")},m(i,s){E(i,e,s),k(e,t),o||(c=O(e,"click",n[7]),o=!0)},p:M,d(i){i&&y(e),o=!1,c()}}}function De(n){let e,t,o,c;return{c(){e=P("span"),t=C(">> Cmd + P"),this.h()},l(i){e=S(i,"SPAN",{id:!0});var s=T(e);t=U(s,">> Cmd + P"),s.forEach(y),this.h()},h(){v(e,"id","search_btn")},m(i,s){E(i,e,s),k(e,t),o||(c=O(e,"click",n[6]),o=!0)},p:M,d(i){i&&y(e),o=!1,c()}}}function G(n){let e,t=(typeof n[11].rep=="string"?n[11].rep:n[11].rep(n[2]))+"",o,c,i,s,_,d;function b(){return n[10](n[11])}return{c(){e=P("p"),o=C(t),i=I(),s=P("br"),this.h()},l(p){e=S(p,"P",{class:!0});var a=T(e);o=U(a,t),a.forEach(y),i=D(p),s=S(p,"BR",{}),this.h()},h(){v(e,"class",c=n[13]==n[4]?"highlighted":"")},m(p,a){E(p,e,a),k(e,o),E(p,i,a),E(p,s,a),_||(d=O(e,"click",b),_=!0)},p(p,a){n=p,a&12&&t!==(t=(typeof n[11].rep=="string"?n[11].rep:n[11].rep(n[2]))+"")&&$(o,t),a&16&&c!==(c=n[13]==n[4]?"highlighted":"")&&v(e,"class",c)},d(p){p&&y(e),p&&y(i),p&&y(s),_=!1,d()}}}function Le(n){let e,t,o,c,i,s,_,d,b,p,a;function g(l,w){return l[5]?De:Ie}let f=g(n),r=f(n),u=n[3],h=[];for(let l=0;l<u.length;l+=1)h[l]=G(Y(n,u,l));return{c(){r.c(),e=I(),t=P("div"),o=P("p"),c=C(W),i=I(),s=P("input"),_=I(),d=P("div");for(let l=0;l<h.length;l+=1)h[l].c();this.h()},l(l){r.l(l),e=D(l),t=S(l,"DIV",{class:!0});var w=T(t);o=S(w,"P",{id:!0});var m=T(o);c=U(m,W),m.forEach(y),i=D(w),s=S(w,"INPUT",{placeholder:!0,type:!0}),_=D(w),d=S(w,"DIV",{class:!0});var L=T(d);for(let j=0;j<h.length;j+=1)h[j].l(L);L.forEach(y),w.forEach(y),this.h()},h(){v(o,"id","searchsuggestion"),v(s,"placeholder","search..."),v(s,"type","text"),v(d,"class","results"),v(t,"class","searchbar"),t.hidden=b=!n[0]},m(l,w){r.m(l,w),E(l,e,w),E(l,t,w),k(t,o),k(o,c),k(t,i),k(t,s),n[8](s),R(s,n[2]),k(t,_),k(t,d);for(let m=0;m<h.length;m+=1)h[m].m(d,null);p||(a=O(s,"input",n[9]),p=!0)},p(l,[w]){if(f===(f=g(l))&&r?r.p(l,w):(r.d(1),r=f(l),r&&(r.c(),r.m(e.parentNode,e))),w&4&&s.value!==l[2]&&R(s,l[2]),w&28){u=l[3];let m;for(m=0;m<u.length;m+=1){const L=Y(l,u,m);h[m]?h[m].p(L,w):(h[m]=G(L),h[m].c(),h[m].m(d,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=u.length}w&1&&b!==(b=!l[0])&&(t.hidden=b)},i:M,o:M,d(l){r.d(l),l&&y(e),l&&y(t),n[8](null),ne(h,l),p=!1,a()}}}let W="";function Ne(n,e,t){let o=!1,c="",i=[],s=0;window.addEventListener("keydown",r=>{r.key=="p"?r.metaKey&&(r.preventDefault(),t(0,o=!0)):r.key=="Escape"&&t(0,o=!1)}),window.addEventListener("keyup",r=>{if(o&&!(r.key=="Meta"||r.key=="Escape"))if(r.key=="ArrowUp")t(4,s=Math.max(s-1,0));else if(r.key=="ArrowDown")t(4,s=Math.min(s+1,i.length-1));else if(r.key=="Tab"){r.preventDefault();let u=i[s].tags;typeof u=="string"&&(u=u.split(":")[0],u=u.split(".").slice(0,c.split(".").length).join("."),t(2,c=u),_.focus())}else if(r.key=="Enter")i[s].executor(c);else{if(c==""){t(3,i=[]);return}t(4,s=0),t(3,i=Te(c)),i.length==0&&t(3,i=[{tags:u=>!0,rep:u=>`âš™ï¸ create Page: ${u}`,executor:u=>{const h=new J("#"+u);N.setitem(h.data),window.location.search=u}},{tags:u=>!0,rep:u=>`âš™ï¸ create secret Page: ${u}`,executor:u=>{const h=new J("_"+u);N.setitem(h.data),window.location.search="_"+u}}]),i[0]}}),window.addEventListener("click",r=>{r.target.id!="search_btn"&&(t(0,o=!1),t(5,d=!1))});let _,d=!1;const b=()=>{t(5,d=!1),t(0,o=!0)},p=r=>{t(5,d=!0)};function a(r){oe[r?"unshift":"push"](()=>{_=r,t(1,_)})}function g(){c=this.value,t(2,c)}const f=r=>{r.executor(c)};return n.$$.update=()=>{n.$$.dirty&3&&o&&(Se(),x().then(()=>{_.focus()}))},[o,_,c,i,s,d,b,p,a,g,f]}class Ce extends Q{constructor(e){super(),X(this,e,Ne,Le,Z,{})}}function Ue(n){let e,t,o,c,i,s=n[1]?"":"offline",_,d,b,p;return e=new Ce({}),{c(){se(e.$$.fragment),t=I(),o=P("h2"),c=new ae(!1),i=I(),_=C(s),d=I(),b=P("div"),this.h()},l(a){ie(e.$$.fragment,a),t=D(a),o=S(a,"H2",{id:!0});var g=T(o);c=le(g,!1),i=D(g),_=U(g,s),g.forEach(y),d=D(a),b=S(a,"DIV",{id:!0});var f=T(b);f.forEach(y),this.h()},h(){c.a=i,v(o,"id","fullheader"),v(b,"id","page")},m(a,g){re(e,a,g),E(a,t,g),E(a,o,g),c.m(n[0],o),k(o,i),k(o,_),E(a,d,g),E(a,b,g),p=!0},p(a,[g]){(!p||g&1)&&c.p(a[0]),(!p||g&2)&&s!==(s=a[1]?"":"offline")&&$(_,s)},i(a){p||(ce(e.$$.fragment,a),p=!0)},o(a){ue(e.$$.fragment,a),p=!1},d(a){pe(e,a),a&&y(t),a&&y(o),a&&y(d),a&&y(b)}}}function Ae(n,e,t){let o,c;V(n,ye,f=>t(8,o=f)),V(n,be,f=>t(1,c=f));let{data:i}=e;document.title=window.location.hostname;var s,_="<br>";s=`<a href=/ onclick="window.location.href = '${window.origin}'; location.reload();" id=homebtn>sciepedia</a>`,_=s,x().then(g);let d;const b=`Click me and write something: xzxysl ... &^

You can create a new link with # followed by text, for example: #link #recursion #whatever

Click on a link to open a page. If the page already exists, it will be displayed to you.

Almost forgot! Create an account: {}/login, and then you can create public pages.

If you want to learn more, check out: #sciepedia:kormann
`;let p,a;o[0];async function g(){_e(),window.fetch=i.fetch,B.subscribe(l=>{l?document.body.classList.add("light"):document.body.classList.remove("light")}),d=document.createElement("div"),d.innerHTML="<p>this is a pred</p><p>this is a pred</p><p>this is a pred</p>",d.id="pred",s=`<a href=/ onclick="setTimeout(()=>{window.location.href='${window.origin}'})" id=homebtn>sciepedia</a>`,t(0,_=s);let f=window.location.search;a=[F(z.path)],f&&f.length>1&&(f=decodeURI(f.slice(1)),q(f)||(f="#"+f),console.log("searching:",f),q(f)&&(a.push(a[0]),z.path=f)),p=document.querySelector("#page"),window.addEventListener("scroll",l=>{t(0,_=s);let w={element:{offsetTop:0},fullpath:"<span id=homebtn>sciepedia</span>"};K.forEach(m=>{window.scrollY+m.element.offsetHeight>m.element.offsetTop&&w.element.offsetTop<m.element.offsetTop})});const r=F("_tutorial:"+o);N.has(r)||N.setitem({Path:r,Content:b.replace("{}",window.location.origin),id:crypto.randomUUID()});let u=F(z.path);if(!N.has(u)){const l={Path:u,Content:`welcome to #sciepedia:kormann
if you're new try out the tutorial: _tutorial`,id:crypto.randomUUID()};localStorage[JSON.stringify(l.Path)]=JSON.stringify(l)}let h=new J("_home",u);u.location.includes("js")&&(h=new me("_home",u)),K.push({element:h.head.title_element,fullpath:u}),p.appendChild(h.element),document.body.addEventListener("click",l=>{l.target==document.body&&ge(null)}),window.addEventListener("onunload",l=>{localStorage.unloading=!0,h.body.free(),localStorage.unloaded=!0}),we().then(()=>{h.body.spellcheck()})}return n.$$set=f=>{"data"in f&&t(2,i=f.data)},[_,c,i]}class je extends Q{constructor(e){super(),X(this,e,Ae,Ue,Z,{data:2})}}export{je as component,Oe as universal};
