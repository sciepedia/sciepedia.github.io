import"./index.9010cc84.js";const i="https://www.sciepedia.com/api/",l=i,h="http://localhost:20518",u="http://localhost:20518/api/";var s,r;function g(){if(window.location.origin.includes("sciepedia"))s=i,r="production";else if(window.location.origin.includes("localhost"))window.location.origin==h?(s=u,r="desktop"):(s=l,r="local");else throw"unknown origin";console.log("backend state: ",r)}async function _(t){let e=localStorage.session_token;var o;try{o=await fetch(s+t+"/"+e)}catch{throw"Error fetching"}let a=await o.text();return JSON.parse(a)}async function k(t,e){var o=s+t+"/"+localStorage.session_token;fetch(o,{method:"POST",body:e}).catch(a=>{console.error("setitem error: ",a)})}async function m(t,e){let o=localStorage.session_token;var a=s+"rate/"+t+"/"+o+"/"+e;fetch(a,{method:"POST"}).catch(n=>{console.error("setitem error: ",n)})}async function S(t,e){let o=`${s}register/${t}/${e}`,a=await fetch(o);if(a.status!=200)throw await a.text();localStorage.username=t,localStorage.passhash=e;try{let n=await a.text();localStorage.session_token=n;return}catch(n){throw n}}async function y(t,e){let o=`${s}login/${t}/${e}`,a=await fetch(o);if(a.status!=200)throw await a.text();let n=await a.text();return localStorage.username=t,localStorage.session_token=n,localStorage.passhash=e,n}const f="d8&";async function x(t,e){return await p(t+e+f)}async function p(t){const e=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(o)).map(c=>c.toString(16).padStart(2,"0")).join("")}function A(t){let e=t[0];return Boolean(e.match(/[a-z]/))?t.replace(/[a-z,A-Z,0-9,\-,\_]/g,"")=="":!1}function b(t){t=t.trim();let e=["..",".","_","#","~"];for(let o=0;o<e.length;o++){const a=e[o];if(t.startsWith(a))return d(t.slice(a.length))}return!1}function d(t){return t==""?!1:/[a-z0-9,ß,ä,ö,ü,ø]/i.test(t[0])}function v(t){return t.startsWith("http://")||t.startsWith("https://")}function $(t){let e=document.createElement("span");return e.innerHTML=t,e.classList.add("httplink"),e.addEventListener("click",o=>{var a;(a=window.open(t,"_blank"))==null||a.focus()}),e}export{v as a,g as b,A as c,S as d,_ as g,b as i,y as l,$ as m,m as r,k as s,x as u};
